### Salesforce Configuration

This section covers configurations on Salesforce side. As we have seen in the previous section, AWS configurations enable updating custom field in Voice Call object whenever Contact Lens real-time rule is matched. Post this, series of actions will be executed in Salesforce to trigger supervisor escalation by raising a flag from agent screen.

**Important Notes**:

1. The code for this example is for non-production use only
2. For Salesforce APIs and Platform Events' volume considerations and limitations, please contact Salesforce

### Salesforce Package

In order to enable Contact Lens driven automated supervisor escalation following Salesforce components need to be installed in your Salesforce org:

1. **Current_Call_Category** - This is a custom field in Voice Call object which will be updated Amazon Connect Contact
   Lens rule matched
2. **Generate CL Platform Event** - This is a Process Automation flow which will be triggered whenever Current\*Call_Category field changes with the value starting with "supesc" and generates Platform Event
3. **clrtsupescalate** - This is a Platform Event which will be generated by Generate CL Platform Event flow
4. **CLSupervisorEscalation** - This is Aura UI component which will trigger API to raise the flag whenever there is a Platform Event clrtsupescalate. This component needs to be added to Voice Call Record Page

To install above Salesforce components, you need to install Salesforce Package called - CLForAutoSupEsc. This is un-managed package created only for learning or lab use (**Only for non-production use only**).

**Steps**

1. Click on this link - https://login.salesforce.com/packaging/installPackage.apexp?p0=04t8d000000E5mW
2. Enter your Salesforce credentials
3. For Package Password : SCVAsset123
4. Leave everything else as is and click on Install
5. Ensure that you will get success message in few minutes

### Salesforce Voice Call Record page

As we discussed, in the Agent Experience section, Voice Call Record page works as agent workspace.There are a custom UI component needs to be added on Voice Call Record page.

**Steps**

1. From Setup, enter Lightning App Builder in the Quick Find box, then select **Lightning App Builder**
2. Click Edit for Voice Call Record Page, which will open Lightning App Builder
3. From the left panel, Components, scroll down till you find **CLSupervisorEscalation** in Custom section and drag and drop **CLSupervisorEscalation** on right section of Voice Call Record page
4. Save your work, then click **Activation**
5. Review the app default assignments, and then save your work. The record page is now available in the Lightning Service Console.

![Voice Call Record Page](./CLForAutoSupEsc.png)

**Next** - [Test use case](./deployment_test.md)
